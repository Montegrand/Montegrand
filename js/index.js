window.onload = function () {
    let opening = `////////////////////////////////////////////////////////////////////////////////////////////////<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:5s22\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s22Xs\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,s9MM9s,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0S22\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sXSs\u00a0\u00a05h5522s22S2hh2\u00a0\u00a0s2s22S2X5h9:\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBBBi\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a05BBBBh\u00a0\u00a0\u00a0\u00a0sBBBBBBBBBB,\u00a0\u00a0\u00a0\u00a0sBBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBB9\u00a0,BBBBBBBBBBBBBB\u00a0\u00a0BBBBBBBBBBB:\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02BBBBB\u00a0\u00a0\u00a0\u00a0BBBB2,\u00a0\u00a0,BBBB,\u00a0\u00a0\u00a0BBBBB9\u00a0\u00a0\u00a0\u00a0,BBB,\u00a0\u00a0,,\u00a0\u00a0:BBB,\u00a0\u00a0\u00a0,\u00a0\u00a0iBBB,\u00a0\u00a0\u00a0\u00a0\u00a0,,\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,BBBBBB\u00a0\u00a0\u00a0\u00a0\u00a0sBBBBBB\u00a0\u00a0\u00a0BBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBB\u00a0\u00a0\u00a0BBBBBB2\u00a0\u00a0\u00a0sBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0hBBM\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sBB9rBB5\u00a0\u00a0\u00a0sBBs2BBh\u00a0\u00a0hBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02BBB\u00a0\u00a0:BBB:BBBr\u00a0\u00a0BBB9\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBX\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBG:rrrrsr\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBr\u00a0BBB\u00a0\u00a0rBB5\u00a0BBB:\u00a0\u00a0BBBs\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBM\u00a0\u00a0XBBB\u00a0,BBB\u00a0\u00a0BBBi\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBB:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBBBBBBBBM\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBB\u00a0\u00a0MBB,,BBM\u00a0\u00a0BBB\u00a0\u00a0\u00a0BBB:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:BBB:\u00a0\u00a0BBB5\u00a0\u00a0rBBBsBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rBBB,,,,,::\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0iBBB\u00a0\u00a0:BBBBBB\u00a0\u00a02BBB\u00a0\u00a0\u00a0BBBh\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,BBBG\u00a0\u00a0\u00a0BBB:\u00a0\u00a0\u00a05BBBBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0GBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0MBB5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a09BBM\u00a0\u00a0\u00a0BBBBB\u00a0\u00a0\u00a0BBBs\u00a0\u00a0\u00a0rBBBMi,:sBBBB9\u00a0\u00a0\u00a0sBBB\u00a0\u00a0\u00a0\u00a0\u00a0GBBBB2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBs\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBB2\u00a0,,,,:i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0BBBs\u00a0\u00a0\u00a09BBB\u00a0\u00a0\u00a0,BBB,\u00a0\u00a0\u00a0\u00a0:BBBBBBBBBM,\u00a0\u00a0\u00a0\u00a0BBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0BBBB,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iBBB,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rBBBBBBBBBBB\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0sss\u00a0\u00a0\u00a0\u00a0\u00a0rr\u00a0\u00a0\u00a0\u00a0,sss\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r2XSs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sss,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rss\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,sss\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:srrrrsrsssr\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/<br>+
    ////////////////////////////////////////////////////////////////////////////////////////////////<br>+<br>`
    if (window.innerWidth < 1280) {
        opening += '+이 포트폴리오는 pc에 최적화 되어 있습니다.<br>+<br>'
    }
    let openingB = opening.split("+");
    let textC = '';
    let pageIndex = 'Page index, <br><br>1. ABOUT, <br> 2. PROJECT, <br> 3. CONTACT, <br><br>Please insert a single digit of the page you want, and press the Enter.<br><br>';
    let indexArr = pageIndex.split(",");

    let textBox = document.querySelector('.window > p:first-child > span');
    let i = 0;
    let consW = document.querySelector('.window');
    let input = document.querySelector('.window input');
    let fakeBox = document.querySelector('.window .fake');
    let errorMessage = 'Please insert a single digit of the page you want, and press the enter.<br><br>';
    let running = false;
    let cBoxes = document.querySelectorAll('.contents > .box');
    let warning = document.querySelector('.contents > .error');
    let contents = document.querySelector('.contents');
    let line = document.querySelector('.line');
    let cons = document.querySelector('.console');
    let mail = false;
    let depth = 0
    let userName = '';
    let userE = '';
    let message = '';
    let gb = document.querySelectorAll('.gb > a');
    let mPressed = false;
    let transition = function () {
        contents.classList.add('transition');
        line.classList.add('transition');
        cons.classList.add('transition');
    }

    line.addEventListener('mousedown', function () {
        mPressed = true;
        let contents = document.querySelector('.contents');
        let line = document.querySelector('.line');
        let cons = document.querySelector('.console');
        if (running) {
            cons.classList.remove('transition');
            contents.classList.remove('transition');
            line.classList.remove('transition');
        }
    })

    line.addEventListener('mouseup', function () {
        mPressed = false;
        if (running) {
            transition();
        }
    })

    gb.forEach(function (v, n) {
        v.addEventListener('click', function () {
            v.classList.add('transition');
            if (!running) {
                if (window.innerWidth < 1280) {
                    if (n === 0) {
                        transition();
                        contents.style.height = `calc(${window.innerHeight - 6}px - 2rem)`
                        line.style.top = `calc(${window.innerHeight - 6}px - 2rem)`
                        cons.style.height = '50px'
                    } else if (n === 1) {
                        transition();
                        contents.style.height = `calc(70vh - 3px)`
                        line.style.top = `calc(70vh - 3px)`
                        cons.style.height = 'calc(30vh)'
                    }
                } else if (n === 0) {
                    transition();
                    contents.style.height = `calc(${window.innerHeight - 6}px - 2rem)`
                    line.style.top = `calc(${window.innerHeight - 6}px - 2rem)`
                    cons.style.height = '50px'
                } else if (n === 1) {
                    transition();
                    contents.style.height = `calc(20vh - 3px)`
                    line.style.top = `calc(20vh - 3px)`
                    cons.style.height = 'calc(80vh)'
                }
            }
        })
    })

    consW.addEventListener('click', function () {
        input.focus();
    })

    if (window.innerWidth > 1280) {
        // contents.addEventListener('mousemove',function(e){
        //     let bg = document.querySelectorAll('pre.bg');
        //     bg.forEach(function(v,n){
        //         if(n==0){
        //             v.style.top = `calc(-${((contents.offsetHeight - e.clientY)/contents.offsetHeight)*5}% - 1%)`;
        //         } else {

        //         }
        //     })
        // })
        // cBoxes.forEach(function (v, n) {
        //     v.addEventListener('mousemove', function (e) {
        //         let X = e.clientX;
        //         let Y = e.clientY;
        //         v.style.backgroundPosition = `${(X / v.offsetWidth) * 100}% ${(Y / v.offsetHeight) * 100}%`;
        //     })

        //     if (n !== 0) {
        //         v.addEventListener('mouseenter', function () {
        //             v.classList.add('hover');
        //         })
        //         v.addEventListener('mouseleave', function () {
        //             v.classList.remove('hover');
        //         })
        //     }
        // })
    }

    if (running === false) {
        running = true;
        textC += 'Welcome to my PORTFOLIO<br><br>I sincerely appreciate your visiting.<br>It meant a lot to me that you took the time to come by.<br>I know how busy you are, and I truly value the time we spent together<br><br>Please know that I am very grateful for your kindness<br><br>';
        indexArr.forEach(function (v, n) {
            textC += v;
        });
        const open = setInterval(() => {
            textBox.innerHTML += openingB[i]
            i++
            consW.scrollBy(0, consW.scrollHeight)
            if (i === openingB.length) {
                clearInterval(open)
                i = 0;
                setTimeout(function () {
                    textBox.nextSibling.classList.add('on');
                    const typing = setInterval(() => {
                        if (textC.charAt(i) === '<') {
                            textBox.innerHTML += '<br>';
                            i = i + 4;
                        } else {
                            textBox.innerHTML += textC.charAt(i)
                            i++;
                        }
                        consW.scrollBy(0, consW.scrollHeight)
                        if (i === textC.length) {
                            clearInterval(typing)
                            line.style.top = `${window.innerHeight * 0.67}px`
                            contents.style.height = `${(window.innerHeight * 0.67) - 3}px`
                            cons.style.height = `${(window.innerHeight * 0.33) + 3}px`
                            textBox.nextSibling.classList.add('off')
                            fakeBox.nextElementSibling.classList.add('on')
                            running = false;
                        }
                    }, 20);
                }, 2500)
            }
        }, 100)
    }



    cons.addEventListener('transitionend', function () {
        let consW = document.querySelector('.window');
        consW.scrollBy(0, consW.scrollHeight)
        cons.classList.remove('transition');
        contents.classList.remove('transition');
        line.classList.remove('transition');
        if (cons.offsetHeight > 50) {
            input.focus();
        }
    })

    cons.addEventListener('resize',function(){
        consW.style.height = 'calc(100% - 2rem)';
    })

    input.addEventListener('keydown', function (e) {
        fakeBox.nextElementSibling.classList.add('keydown');
        fakeBox.innerHTML = input.value;
    })
    input.addEventListener('keyup', function (e) {
        fakeBox.nextElementSibling.classList.remove('keydown')
        fakeBox.innerHTML = input.value
        inputText = '';

        if (e.key === 'Enter') {

            let chk = input.value
            if (input.value != 'submit') {
                textBox.innerHTML += '<br>' + input.value;
            } else {
                textBox.innerHTML += '<br><br>' + input.value;
            }
            if (!mail && depth === 0) {
                cBoxes.forEach(function (v, n) {
                    v.classList.remove('load')
                })
            } else if (depth === 6) {
                cBoxes.forEach(function (v, n) {
                    v.classList.remove('load')
                })
            }
            const run = function () {
                if (running === false) {
                    running = true;
                    textBox.innerHTML += '<br><br>'
                    textBox.nextSibling.classList.remove('off')
                    textBox.nextSibling.classList.add('on')
                    fakeBox.nextSibling.classList.remove('on')
                    i = 0
                    const typing = setInterval(() => {
                        if (inputText.charAt(i) === '<') {
                            textBox.innerHTML += '<br>'
                            i = i + 4
                        } else {
                            textBox.innerHTML += inputText.charAt(i)
                            i++;
                        }
                        consW.scrollBy(0, consW.scrollHeight)
                        if (i === inputText.length) {
                            clearInterval(typing)
                            textBox.nextSibling.classList.add('off')
                            fakeBox.nextSibling.classList.add('on')
                            input.focus();
                            running = false;
                            contents.classList.remove('loading')
                            if (!mail) {
                                cBoxes.forEach(function (v, n) {
                                    if (n + 1 == chk) {
                                        v.classList.add('load')
                                    }
                                })
                            }
                            chk = ''
                        }
                    }, 30);
                }
                return false;
            }

            const error = function () {
                warning.classList.add('load')
                inputText += 'error'
                inputText += `<br><br>`
                indexArr.forEach(function (v, n) {
                    if (n < (indexArr.length - 2)) {
                        inputText += v
                    }
                })
                inputText += '<br><br>' + errorMessage
                run();
                chk = '';
            }

            const pageMove = function () {
                warning.classList.remove('load')
                inputText += `success<br><br>Go to page no.${chk}<br><br>`
                contents.classList.add('loading')
                if (chk == 3) {
                    indexArr.forEach(function (v, n) {
                        if (n < (indexArr.length - 2)) {
                            inputText += v
                            if (n === Number(chk) && depth === 0) {
                                inputText += ' (now)<br><br>'
                            }
                        }
                    })
                    inputText += `Would you like to go to another page?<br>Or to leave me an email?<br><br> 1. To page index<br> 2. To leave me E-mail.`;
                } else {
                    indexArr.forEach(function (v, n) {
                        inputText += v
                        if (n === Number(chk)) {
                            inputText += ' (now)'
                        }
                    })
                }
                run();
            }

            if (depth === 0) {
                if (Number.isInteger(Number(chk))) {
                    if (chk == 1 || chk == 2) {
                        pageMove();
                    } else if (Number(chk) === 3) {
                        pageMove();
                        depth++
                    } else {
                        error();
                    }
                } else {
                    error();
                }
            } else {
                if (depth === 1) {
                    mail = true;
                    if (chk == 1) {
                        indexArr.forEach(function (v, n) {
                            inputText += v;
                        });
                        run();
                        mail = false;
                        chk = '';
                        depth = 0;
                    } else if (chk == 2) {
                        inputText = 'If you want to cancel, please type {cancel} and press the Enter.<br><br>Your name<br>';
                        run();
                        depth++;
                        contents.classList.add('transition')
                        line.classList.add('transition')
                        cons.classList.add('transition')
                        contents.style.height = '33.3vh'
                        line.style.top = '33.3vh'
                        cons.style.height = '66.7vh'
                    } else {
                        inputText += `
                        ERROR<br><br>Please enter a single digit<br><br>Would you like to go to another page?<br>Or to leave me an email?<br><br> 1. To page index<br> 2. To leave me E-mail.`;
                        run();
                    }
                } else if (depth > 1) {
                    if (input.value == 'cancel' || input.value == '{cancel}') {
                        cBoxes.forEach(function (v, n) {
                            v.classList.remove('load')
                        })
                        userName = '';
                        userE = '';
                        message = '';
                        pageMove();
                        contents.classList.add('transition');
                        line.classList.add('transition');
                        cons.classList.add('transition');
                        contents.style.height = '66.6vh'
                        line.style.top = '66.6vh'
                        cons.style.height = '33.4vh'
                        mail = false;
                        depth = 0;
                    } else if (depth === 2) {
                        userName += input.value;
                        inputText = 'Your E-mail<br>';
                        run();
                        depth++
                    } else if (depth === 3) {
                        var regEmail = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/;
                        if (regEmail.test(input.value) === true) {
                            userE += input.value;
                            inputText = 'Please write a message for me. <br>If you want a line break, just press Enter. <br>If you have finished writing the message, write {submit}, <br>if you want to cancel, write {cancel} and press Enter.<br><br>';
                            depth++;
                            run();
                        } else {
                            inputText += 'Please check that you have entered your email <br>correctly in the form and re-enter it.'
                            run();
                        }
                    } else if (depth === 4) {
                        if (input.value == 'submit' || input.value == '{submit}') {
                            let msgArr = message.split('\n')
                            inputText = `Your name: ${userName}<br>Your E-mail: ${userE}<br>message: <br><br>`
                            msgArr.forEach(function (v, n) {
                                inputText += v + '<br>'
                            })
                            inputText += `Are you really going to leave me a message with the above? <br>If yes, write 1, <br>if you want to return to the beginning, <br>write 2 and press the Enter.`
                            run();
                            input.value = '';
                            fakeBox.innerHTML = '';
                            depth++
                        } else if (input.value == '') {
                            textBox.innerHTML += '<br>'
                        }
                        message += input.value;
                        message += '\n'
                        input.focus();
                        consW.scrollBy(0, consW.scrollHeight)
                        console.log(message)
                    } else if (depth === 5) {
                        if (input.value == 1) {
                            const sendEmail = () => {
                                emailjs.init('xnJqTSF8rbKnXYsyO');
                                let templateParams = {
                                    name: userName,
                                    email: userE,
                                    message: message,
                                }
                                console.log(templateParams);
                                emailjs.send('service_97uazly', 'template_hhwttqm', templateParams).then(function (response) {
                                    console.log('Success!', response.status, response.text);
                                }, function (error) {
                                    console.log('Failed...', error);
                                })
                            }
                            sendEmail();
                            inputText += 'Thank you for leaving your mail. <br>I will reply to you later.<br><br>';
                            indexArr.forEach(function (v, n) {
                                inputText += v;
                            });
                            run();
                            userName = '';
                            userE = '';
                            message = '';
                            depth++;
                        } else if (input.value == 2) {
                            indexArr.forEach(function (v, n) {
                                inputText += v;
                            })
                            run();
                            console.log(depth);
                            depth++
                        } else {
                            let msgArr = message.split('\n')
                            inputText = `<br><br>ERROR<br><br>Please enter a single digit<br><br>Your name: ${userName}<br>Your E-mail: ${userE}<br>message: <br>`
                            msgArr.forEach(function (v, n) {
                                inputText += v + '<br>'
                            })
                            inputText += `Are you really going to leave me a message with the above? <br>If yes, write 1, <br>if you want to return to the beginning, <br>write 2 and press enter.`
                            run();
                            input.value = '';
                            fakeBox.innerHTML = '';
                        }
                    } else if (depth === 6) {
                        if (input.value != 3) {
                            pageMove();
                            contents.classList.add('transition');
                            line.classList.add('transition');
                            cons.classList.add('transition');
                            contents.style.height = '66.6vh'
                            line.style.top = '66.6vh'
                            cons.style.height = '33.4vh'
                            mail = false;
                            depth = 0;
                        } else if (input.value == 3) {
                            contents.classList.add('transition');
                            line.classList.add('transition');
                            cons.classList.add('transition');
                            contents.style.height = '66.6vh'
                            line.style.top = '66.6vh'
                            cons.style.height = '33.4vh'
                            pageMove();
                            depth = 1;
                        }
                    } else {
                        error();
                    }
                }
            }
            if (depth < 4) {
                textBox.nextSibling.classList.remove('off')
                fakeBox.nextElementSibling.classList.remove('on')
            }
            input.value = ''
            fakeBox.innerHTML = ''
        }
    })

    window.addEventListener('mousemove', function (e) {
        let contents = document.querySelector('.contents');
        let line = document.querySelector('.line');
        let cons = document.querySelector('.console')
        if (mPressed) {
            let consW = document.querySelector('.window');
            line.style.top = `${e.clientY - 3}px`
            contents.style.height = `${e.clientY - 3}px`
            cons.style.height = `${window.innerHeight - e.clientY - 6}px`
        }
    });

    window.addEventListener('resize', function () {
        if (!running) {
            contents.style.height = `${window.innerHeight * 0.67}px`
            line.style.top = `${contents.offsetHeight}px`
            cons.style.height = `${window.innerHeight - (contents.offsetHeight + line.offsetHeight)}px`
        }
    })

    let imgA = document.querySelectorAll('.box.snd > div > div:first-child a');
    let sndBt = document.querySelectorAll('.box.snd > div > div:last-child a');

    sndBt.forEach(function (v, n) {
        v.addEventListener('click', function () {
            for (i = 0; i < sndBt.length; i++) {
                if (i === n) {
                    imgA[i].classList.add('on')
                } else {
                    imgA[i].classList.remove('on')
                }
            }
        })
    })

}